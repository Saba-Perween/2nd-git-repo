pipeline
{
	agent any
	stages
	{
		stage('Build Application')
		{
			steps
			{
				bat 'mvn -f webprojectapi/pom.xml clean package'
			}
			post
			{
				success
				{
					echo "Now archiving the artifacts"
					archiveArtifacts artifacts: '**/*.war'
				}
			}
		}
		stage('Deploy to Staging Enc')
		{
			steps
			{
				build job: 'deploy_to_staging'
			}
		}
		stage('Deploy to Prd Env')
		{
			steps
			{
				timeout(time:5, unit: 'DAYS')
				{
					input message: 'Approve PRODUCTION DEPLOYMENT?'
				}
			build job: 'deploy_to_prd'	
			}
		}
	}
}